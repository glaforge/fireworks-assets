<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
  <title>July 4th Fireworks -- with APISpark by Restlet</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="../css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="../css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-32616835-2', 'auto');
    ga('send', 'pageview');
  </script>
</head>
<body>
  <nav class="white" role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="http://restlet.com/" class="brand-logo"><img src="../img/restlet.png" height="30px"></a>
      <ul class="right hide-on-med-and-down">
        <li><a href="http://restlet.com/products/restlet-framework"><img src="../img/logo-restlet-framework.png" height="35px" style="position: relative; top: 10px;"></a></li>
        <li><a href="http://restlet.com/products/apispark"><img src="../img/logo-apispark.png" height="35px" style="position: relative; top: 12px;"></a></li>
        <li><a href="http://restlet.com/products/restlet-studio"><img src="../img/logo-restlet-studio.png" height="35px" style="position: relative; top: 10px;"></a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="https://docs.google.com/forms/d/1ea3ez7jS13Tr13xl0eUoDjKdDHZhG1VFw2MUlEzX3Kk/viewform">Submit a firework</a></li>
        <li><a href="http://restlet.com">Restlet</a></li>
        <li><a href="http://restlet.com/products/apispark">APISpark</a></li>
        <li><a href="http://restlet.com/products/restlet-studio">Restlet Studio</a></li>
        <li><a href="http://restlet.com/products/restlet-framework">Restlet Framework</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>

  <div id="index-banner" class="parallax-container">
    <div class="section no-pad-bot">
      <div class="container">
        <h1 class="header center teal-text text-lighten-2"><b>4th of July Fireworks</b></h1>
        <div class="row center">
          <h5 class="header col s12 teal-text">
            For Independence Day, let's find fireworks to enjoy in your area!<br/>
            And contribute the ones you know around you.
          </h5>
        </div>
        <div class="row center">
          <a href="#gform" id="submit-firework" class="modal-trigger btn-large waves-effect waves-light teal lighten-1 z-depth-3">Submit a firework</a>

          <!-- Modal Structure -->
          <div id="gform" class="modal modal-fixed-footer" style="display:none;">
            <div class="modal-content">
              <iframe src="https://docs.google.com/forms/d/1ea3ez7jS13Tr13xl0eUoDjKdDHZhG1VFw2MUlEzX3Kk/viewform?embedded=true"
                      width="660" height="350" frameborder="0" marginheight="0" marginwidth="0">Loading...</iframe>
            </div>
            <div class="modal-footer">
              <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Close</a>
            </div>
          </div>
        </div>
        <br><br>
      </div>
    </div>
    <div class="parallax"><img src="../img/background1.jpg" alt="Unsplashed background img 1"></div>
  </div>

  <div class="container">
    <div class="section">
      <div class="row" id="state-container">

        <div id="spinner" class="col s12 center">
          <div class="preloader-wrapper big active">
            <div class="spinner-layer spinner-blue">
              <div class="circle-clipper left">
                <div class="circle"></div>
              </div><div class="gap-patch">
              <div class="circle"></div>
            </div><div class="circle-clipper right">
              <div class="circle"></div>
            </div>
            </div>
          </div>
        </div>

        <script>
          var states = [
            "Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", "DC", "Delaware",
            "Florida", "Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana",
            "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana",
            "Nebraska", "Nevada", "New Hampshire", "New Jersey", "New Mexico", "New York", "North Carolina",
            "North Dakota", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota",
            "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington", "West Virginia", "Wisconsin", "Wyoming"
          ];

          states.forEach(function(state) {
            document.write(
                    '<div class="col s4">' +
                      '<ul class="collapsible orange lighten-2" data-collapsible="accordion"  style="display:none" id="' + state.replace(' ', '-') + '">' +
                        '<li class="white-text">' +
                          '<div class="collapsible-header orange lighten-2"><h5>' + state + '</h5></div>' +
                        '</li>' +
                      '</ul>' +
                    '</div>');
          });
        </script>
      </div>
    </div>
  </div>

  <div class="parallax-container valign-wrapper">
    <div class="section no-pad-bot">
      <div class="container">
        <div class="row center">
          <h2 class="header col s12 orange-text light">
            <b>Host your Google Sheets-powered Web APIs and website assets in APISpark</b>
          </h2>
        </div>
      </div>
    </div>
    <div class="parallax"><img src="../img/background2.jpg" alt="Unsplashed background img 2"></div>
  </div>

  <div class="container">
    <div class="section">

      <div class="row">
        <div class="col s9 center">
          <h4>About this site</h4>
          <p class="left-align light">
            This fireworks listing is powered by <a href="http://restlet.com/products/apispark" class="orange-text text-lighten-2">APISpark</a>,
            the API platform provided by <a href="http://restlet.com" class="orange-text text-lighten-2">Restlet</a>.
          </p>
          <p class="left-align light">
            We hand-picked fireworks taking place in all the US states,
            and we let you submit new ones in you area.
          </p>
          <p class="left-align light">
            The data collected is hosted in an
            <a href="http://restlet.com/technical-resources/apispark/tutorials/turn-spreadsheet-to-api" class="orange-text text-lighten-2">APISpark Google Sheets wrapper</a>.
            The fireworks that you submit are going through a Google Form that appends data to our spreadsheet.
            APISpark is then responsible for exposing the data from this Google Sheets as a Web API.
          </p>
          <p class="left-align light">
            All the <a href="https://github.com/glaforge/fireworks-assets" class="orange-text text-lighten-2">assets</a> of this site are also hosted
            through an <a href="http://restlet.com/technical-resources/apispark/tutorials/github" class="orange-text text-lighten-2">APISpark Github file store</a>, served by our platform.
          </p>
          <p class="left-align light">
            The design is coming from the <a href="http://materializecss.com" class="orange-text text-lighten-2">Materialize</a> project, while the images are free for reuse,
            coming from the Wikimedia foundation and StockSnap.
          </p>
        </div>
        <div class="col s3 center">
          <h4>Contact us</h4>
          <p class="left-align light">
            Contact us through <a href="http://twitter.com/restlet" class="orange-text text-lighten-2">twitter</a>
            or by <a href="mailto:contact@restlet.com" class="orange-text text-lighten-2">email</a> if you want to talk to us about our products
            or suggest an improvement to this site.
          </p>
        </div>
      </div>

    </div>
  </div>


  <div class="parallax-container valign-wrapper">
    <div class="section no-pad-bot">
      <div class="container">
        <div class="row center">
          <h1 class="header center teal-text"><b>Happy July 4th</b></h1>
          <p class="light teal-text">
            <b>Fireworks pictures coming from:</b>
          </p>
        </div>
        <div class="row">
          <div class="col s4">
            <a class="waves-effect waves-light btn z-depth-3" href="https://stocksnap.io/photo/BCMVII6673">
              <i class="material-icons left">image</i>
              Flag and spark
            </a>
          </div>
          <div class="col s4">
            <a class="waves-effect waves-light btn z-depth-3" href="https://commons.wikimedia.org/wiki/File:370_rsd_fireworks_blue.jpg">
              <i class="material-icons left">image</i>
              East River firework
            </a>
          </div>
          <div class="col s4">
            <a class="waves-effect waves-light btn z-depth-3" href="https://commons.wikimedia.org/wiki/File:Fireworks_DetroitWindsorIntlFreedomFest.jpg">
              <i class="material-icons left">image</i>
              Detroit firework
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="parallax"><img src="../img/background3.jpg" alt="Unsplashed background img 3"></div>
  </div>

  <footer class="page-footer teal">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">About us</h5>
          <p class="grey-text text-lighten-4">
            At <a href="http://restlet.com" class="orange-text text-lighten-3">Restlet</a>, we know about APIs.
            We provide tools for developers (and non-developers, too) to
            design, create, run and manage APIs that provide access to any data or application.
          </p>
          <p class="grey-text text-lighten-4">
            Restlet makes developers' life easier through a combination of open source
            and on-demand tools that seamlessly turn any organization into an API provider,
            connected to the global API-powered digital economy.</p>
        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Products</h5>
          <ul>
            <li><a class="orange-text text-lighten-3" href="http://restlet.com/products/restlet-framework">Restlet Framework</a></li>
            <li><a class="orange-text text-lighten-3" href="http://restlet.com/products/apispark">APISpark</a></li>
            <li><a class="orange-text text-lighten-3" href="http://restlet.com/products/restlet-studio">Restlet Studio</a></li>
          </ul>
        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Connect</h5>
          <ul>
            <li><a class="orange-text text-lighten-3" href="http://restlet.com/">Company</a></li>
            <li><a class="orange-text text-lighten-3" href="http://restlet.com/blog">Blog</a></li>
            <li><a class="orange-text text-lighten-3" href="https://twitter.com/restlet">Twitter</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
        Made with &hearts; thanks to <a class="orange-text text-lighten-3" href="http://materializecss.com">Materialize</a>,
        <a class="orange-text text-lighten-3" href="https://github.com/marmelab/restful.js">Restful.js</a>,
        <a class="orange-text text-lighten-3" href="https://www.google.com/sheets/about/">Google Sheets</a>,
        and <a class="orange-text text-lighten-3" href="http://restlet.com/products/apispark">APISpark</a>.
      </div>
    </div>
  </footer>

  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="../js/materialize.js"></script>
  <script src="../js/init.js"></script>
  <script src="../js/restful.min.js"></script>
  <script>
    $( document ).ready(function() {

      var api = restful('fireworks.apispark.net').prefixUrl('v1').protocol('https');

      var towns = api.all('towns').getAll().then(function(response) {
        var allTowns = response.body();

        allTowns.forEach(function(town) {
          var townData = town.data();
          $('#' + townData.fullUsState.replace(' ', '-'))
                  .append('<li>' +
                            '<div class="collapsible-header">' +
                              townData.city +
                            '</div>' +
                            '<div class="collapsible-body popout teal lighten-5"><p>' +
                              '<b>' + townData.date + ' &mdash; ' + townData.time + '</b> ' +
                                (townData.duration == 0 ? '' : '(' + townData.duration + ' min)') + '<br/>' +
                              '<b>Event:</b> ' + townData.location +
                              (townData.price !== undefined ? ' (' + townData.price + ')' : '') + '<br/>' +
                              (townData.bestSpot !== undefined ? '<b>Best spot: </b> ' + townData.bestSpot  : '') +
                            '</p></div>' +
                          '</li>');
        });

        $('#spinner').hide();

        states.forEach(function(state) {
          var stateElem = $('#' + state.replace(' ', '-'));
          console.log(stateElem.children().length);
          if (stateElem.children().length > 1) stateElem.show();
        });

        $('.collapsible').collapsible({
          accordion : true
        });

        $('.modal-trigger').leanModal({
                  dismissible: true,
                  opacity: .5,
                  in_duration: 300,
                  out_duration: 200,
                  ready: function() {  },
                  complete: function() {  }
                }
        );
      });
    });
  </script>

  </body>
</html>

